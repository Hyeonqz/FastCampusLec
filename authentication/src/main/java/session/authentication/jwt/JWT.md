## JWT 

JSON Web Token 은 웹 표준으로 써 데이터의 JSON 객체를 사용하여 가볍고
자가 수용적인 방식으로 정보를 안전하게 전달할 수 있도록 설계된 토큰 기반의 인증 방식이다.

JWT 는 URL, HTTP Header, HTML Form 과 같은 다양한 방식으로 전달할 수 있다.

서버와 클라이언트 간의 인증 정보를 포함한다.

JWT 는 <b style='color:red'>Header, Payload, Signature</b> 세 부분으로 구성됩니다.
- Header 는 JWT 의 타입과 암호화 알고리즘 등을 포함하며, JSON 형식으로 인코딩됨

Payload 는 클레임 정보를 포함하며, JSON 형식으로 인코딩 된다
- 클레임 정보는 사용자 ID, 권한 등의 정보를 포함한다.

Signature 는 Header 와 Payload 를 조합한 후, 비밀 키를 사용하여 생성된 서명 값이다.
- 서명 값은 해쉬 알고리즘으로 만든다.(=HS256)
- 서명 값은 토큰의 무결성을 보장하며, JWT 를 조작하지 않았다는 것을 검증합니다.

1) jwt 공식사이트 <br>
   https://jwt.io/
<br><br>
2) jwt token -> url encode 시키는 사이트
https://www.base64decode.org/

JWT Token 은 해쉬 알고리즘을 통하여 서명을 한다.

여기서 서명이라 함은, 내가 이것을 증명했다는 뜻이다.

- 내가 원하는 값을 싣어 보낸다
- JSON 구조로 되어있다.
- 내가 서명한 키가 유출되지 않는 이상, 내가 발행한 것을 확인하고 증명할 수 있다.


#### JWT Token 인증 방식
1) 클라이언트가 서버에 로그인 요청을 보낸다.
2) 서버는 로그인 요청을 검증하고, 유효한 사용자라면 JWT 를 생성하여 클라이언트에게 반환한다.
   - 쿠키로 반환할수도 있고, Json Body 에 담아서 ResponseBody 로 내릴 수 있다.
3) 클라이언트는 이후 요청에 JWT 를 포함시켜 전송합니다.
4) 서버는 JWT 를 검증하여, 클라이언트의 인증 여부를 판단한다.


#### 장점
1) 토큰 기반의 인증 방식이므로, 서버 측에서 별도의 세션 저장소를 유지할 필요가 없다
   - 레디스, 세션 클러스터링을 통해서 서비스 할 필요없다.
   - 서버를 유지보수하는데 있어 편리하다.
2) JSON 형식으로 인코딩 되므로, 다양한 플랫폼간에 쉽게 전송 및 구현할 수 있다.
3) Signature 를 사용하여 무결성을 보장하므로, 토큰이 변조되었는지 여부를 쉽게 검증할 수 있다.
   - 원본 값을 건드리며 결과 값이 달라지기 때문에 쉽게 검증 가능하다.

#### 단점
1) JWT 의 크기가 커질 경우, 네트워크 대역폭이 증가할 수 있다.
2) JWT 는 한 번 발급된 후에는 내부 정보를 수정할 수 없다. 그러므로 만료 시간을 짧게 설정해야한다.
3) JWT 를 탈취당하면, 해당 토큰을 사용한 모든 요청이 인증되므로, 보안 위협이 될 수 있다.
   - HTTPS 와 같은 보안 프로토콜을 사용하여 JWT 를 전송해야 한다.